<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mad og Mæthed</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
        }

        body {
            background-color: #f5f5f5;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: white;
            min-height: 100vh;
        }

        .header {
            position: sticky;
            top: 0;
            background: white;
            padding: 20px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            z-index: 100;
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
            color: #333;
        }

        .search-container {
            margin-bottom: 20px;
        }

        .search-input {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            border: 2px solid #ddd;
            border-radius: 8px;
            outline: none;
        }

        .search-input:focus {
            border-color: #007bff;
        }

        .search-results {
            position: absolute;
            width: calc(100% - 40px);
            max-height: 300px;
            overflow-y: auto;
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            display: none;
        }

        .search-item {
            padding: 12px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
        }

        .search-item:hover {
            background-color: #f8f9fa;
        }

        .chart-container {
            margin-top: 20px;
            height: 500px;
            position: relative;
        }

        .legend {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            font-size: 14px;
        }

        .legend-color {
            width: 16px;
            height: 16px;
            margin-right: 8px;
            border-radius: 4px;
        }

        @media (max-width: 480px) {
            .container {
                padding: 10px;
            }

            .search-input {
                font-size: 14px;
            }

            .legend {
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>Mad og Mæthed</h1>
        <div class="search-container">
            <input type="text" class="search-input" placeholder="Søg efter fødevare...">
            <div class="search-results"></div>
        </div>
        <div class="legend">
            <div class="legend-item">
                <div class="legend-color" style="background: rgba(255,0,0,0.2)"></div>
                <span>Høje kalorier, Lav mæthed</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: rgba(255,165,0,0.2)"></div>
                <span>Høje kalorier, Høj mæthed</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: rgba(0,128,0,0.2)"></div>
                <span>Lave kalorier, Høj mæthed</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: rgba(255,255,0,0.2)"></div>
                <span>Lave kalorier, Lav mæthed</span>
            </div>
        </div>
    </div>
    <div class="chart-container">
        <canvas id="foodChart"></canvas>
    </div>
</div>

<script>
    const foods = [
        // Frugt (per 100g)
        { name: "Æble", calories: 52, satiety: 4.2 },
        { name: "Banan", calories: 89, satiety: 6.1 },
        { name: "Appelsin", calories: 47, satiety: 4.8 },
        // ... resten af fødevarerne ...
    ];

    // Setup Chart.js
    const ctx = document.getElementById('foodChart').getContext('2d');
    const quadrantPlugin = {
        id: 'quadrantPlugin',
        beforeDraw: (chart) => {
            const {ctx, chartArea: {top, bottom, left, right, width, height}} = chart;
            const midX = left + width / 2;
            const midY = top + height / 2;

            // Draw quadrants
            ctx.save();

            // Red quadrant (top-left)
            ctx.fillStyle = 'rgba(255,0,0,0.2)';
            ctx.fillRect(left, top, midX - left, midY - top);

            // Orange quadrant (top-right)
            ctx.fillStyle = 'rgba(255,165,0,0.2)';
            ctx.fillRect(midX, top, right - midX, midY - top);

            // Green quadrant (bottom-right)
            ctx.fillStyle = 'rgba(0,128,0,0.2)';
            ctx.fillRect(midX, midY, right - midX, bottom - midY);

            // Yellow quadrant (bottom-left)
            ctx.fillStyle = 'rgba(255,255,0,0.2)';
            ctx.fillRect(left, midY, midX - left, bottom - midY);

            ctx.restore();
        }
    };

    const foodChart = new Chart(ctx, {
        type: 'scatter',
        data: {
            datasets: [{
                label: 'Fødevarer',
                data: foods.map(food => ({
                    x: food.satiety,
                    y: food.calories,
                    name: food.name
                })),
                backgroundColor: 'rgba(75, 192, 192, 0.6)',
                pointRadius: 6
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            const point = context.raw;
                            return [
                                point.name,
                                `Kalorier: ${point.y}`,
                                `Mæthed: ${point.x.toFixed(1)}`
                            ];
                        }
                    }
                },
                legend: {
                    display: false
                }
            },
            scales: {
                x: {
                    title: {
                        display: true,
                        text: 'Mæthedsfornemmelse (1-10)'
                    },
                    min: 0,
                    max: 10
                },
                y: {
                    title: {
                        display: true,
                        text: 'Kalorier per 100g'
                    },
                    min: 0,
                    max: 900
                }
            }
        },
        plugins: [quadrantPlugin]
    });

    // Search functionality
    const searchInput = document.querySelector('.search-input');
    const searchResults = document.querySelector('.search-results');

    searchInput.addEventListener('input', (e) => {
        const searchTerm = e.target.value.toLowerCase();
        if (searchTerm.length < 1) {
            searchResults.style.display = 'none';
            return;
        }

        const filteredFoods = foods.filter(food =>
            food.name.toLowerCase().includes(searchTerm)
        );

        searchResults.innerHTML = filteredFoods
            .map(food => `
                    <div class="search-item" data-name="${food.name}">
                        ${food.name} (${food.calories} kcal/100g)
                    </div>
                `)
            .join('');

        searchResults.style.display = 'block';
    });

    searchResults.addEventListener('click', (e) => {
        const item = e.target.closest('.search-item');
        if (!item) return;

        const selectedName = item.dataset.name;
        const selectedFood = foods.find(f => f.name === selectedName);

        // Highlight selected food in chart
        foodChart.data.datasets[0].pointBackgroundColor = foods.map(f =>
            f.name === selectedName ? 'rgba(255, 0, 0, 0.8)' : 'rgba(75, 192, 192, 0.6)'
        );
        foodChart.data.datasets[0].pointRadius = foods.map(f =>
            f.name === selectedName ? 10 : 6
        );
        foodChart.update();

        searchInput.value = '';
        searchResults.style.display = 'none';
    });

    // Close search results when clicking outside
    document.addEventListener('click', (e) => {
        if (!e.target.closest('.search-container')) {
            searchResults.style.display = 'none';
        }
    });
</script>
</body>
</html>